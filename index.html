<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HtmlGame1</title>
    <style>
        canvas{
            border: 1px solid #d3d3d3;
            background-color: #f1f1f1;
        }
        #filter{
            position: absolute;
            background-color: black;
            opacity: 0.5;
            width: 500px;
            height: 500px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="filter"></div>
    <canvas id="canvas"></canvas>
    <script>
        const canvas=document.querySelector('canvas')
        var isgameover=0
        let x=0
        let y=0
        canvas.width=500
        canvas.height=500
        var red_obj=[]
        const ctx=canvas.getContext('2d')
        ctx.fillStyle='green'
        ctx.fillRect(0,0,10,10)
        function mvpiece(mx,my){
            console.log('clear')
            ctx.fillStyle='green'
            ctx.clearRect(x,y,10,10)
            x+=mx
            y+=my
            ctx.fillRect(x,y,10,10)
            red_obj.forEach( ele =>{
                if(((x+10>ele['x'] && y+10>ele['y'])||(x>ele['x']+10 && y>ele['y']+10))&&((x<ele['x']+10 && y<ele['y']+10))){
                console.log('%cCrash','color:red;font-size: large')
                isgameover=1
                document.querySelector('#filter').style.display='block'
            }
            })
        }
        window.addEventListener('keydown',(e)=>{
            if (!isgameover){
            var code = e.keyCode;
    switch (code) {
        case 37: mvpiece(-5,0); break; //Left key
        case 38: mvpiece(0,-5); break; //Up key
        case 39: mvpiece(5,0); break; //Right key
        case 40: mvpiece(0,5); break; //Down key
        // default: console.log(code)
    }}
        })
        for (i=1;i<=10;i++){
            ctx.fillStyle='red'
            red_obj.push({
                x: Math.floor(Math.random()*100),
                y: i*50
            })
            ctx.fillRect(red_obj[red_obj.length-1]['x'],red_obj[red_obj.length-1]['y'],10,10)
        }
        console.log('Initialnized!')
    </script>
</body>
</html>